<!--安全设置-->
<div class="right-area right-assets-height">
	<div class="right-title">安全设置</div>
	<div class="safe-process">
		<p class="process-tips safe-pwd">登录密码</p>
		<p class="process-tips safe-phone">手机号认证</p>
		<p class="process-tips safe-mail">邮箱绑定</p>
		<p class="process-tips safe-realname">实名认证开通三方托管账户</p>
	</div>
	<div class="safe-part">
		<p class="tips">用户名</p>
		<p class="message">{{ loginName || "游客"}}</p>
		<p class="activity hadset">{{"已确定"}}</p>
		<div class="check-ok"></div>
	</div>
	<div class="safe-part">
		<p class="tips">登录密码</p>
		<p class="message">已设置</p>
		<p class="activity"><a href="javascript:;" ng-click="changPwd = !changPwd;changeEmail=false;changeMobile=false">修改</a></p>
	</div>
	<div class="change-area change-pwd-height" ng-show="changPwd" ng-init="changPwd=false">
		<form class="real-name" name="changePwdForm" ng-submit="changePassword(password)">
			<div class="safe-form-group">
				<label for="oldPwd">原始密码：</label>
				<input type="password" class="verify-input"  
					name="oldPwd"
					id = "oldPwd"
					ng-model="password.oldPassword" 
					check-password="oldPwd"
					required
					ng-focus				
					autofocus/>
				<div class="user-tips-area safe-tips-area" 
						ng-show="changePwdForm.oldPwd.$dirty && changePwdForm.oldPwd.$invalid && !changePwdForm.oldPwd.$focused && changePwdForm.oldPwd.$error.required">
					<img ng-src="images/check_no.png" class="user-check-img">
					<p class="input-tips user-input-tips">请输入原密码</p>
				</div>
				<div class="user-tips-area safe-tips-area" 
						ng-show="changePwdForm.oldPwd.$dirty && !changePwdForm.oldPwd.$focused && changePwdForm.oldPwd.$error.isPasswordTrue">
					<img ng-src="images/check_no.png" class="user-check-img">
					<p class="input-tips user-input-tips">原始密码错误</p>
				</div>
			</div>
			<div class="safe-form-group">
				<label>新密码：</label>
				<input type="password" class="verify-input"
					name = "newPwd"
					id = "newPwd" 
					ng-model="password.newPassword"
					ng-focus
					required/>
				<div class="user-tips-area safe-tips-area" 
						ng-show="changePwdForm.newPwd.$dirty && changePwdForm.newPwd.$invalid && !changePwdForm.newPwd.$focused">
					<img ng-src="images/check_no.png" class="user-check-img">
					<p class="input-tips user-input-tips">请输入新密码</p>
				</div>
			</div>
			<div class="safe-form-group">
				<label>确认密码：</label>
				<input type="password" class="verify-input"
					name = "confirmPwd"
					id = "confirmPwd"
					ng-focus 
					ng-model="password.repeatNewPassword" required/>
				<div  class="user-tips-area safe-tips-area"
						ng-show="changePwdForm.confirmPwd.$dirty && changePwdForm.confirmPwd.$invalid && !changePwdForm.confirmPwd.$focused">
					<img ng-src="images/check_no.png" class="user-check-img">
					<p class="input-tips user-input-tips">请输入确认密码</p>
				</div>
				<div  class="user-tips-area safe-tips-area"
						ng-show="changePwdForm.confirmPwd.$dirty && !checkTwoPassword(password) && !changePwdForm.confirmPwd.$focused" >
					<img ng-src="images/check_no.png" class="user-check-img">
					<p class="input-tips user-input-tips">两次输入的密码不一致</p>
				</div>
			</div>
			<input type="submit" value="确定" class="verify-button mail-button"  ng-disabled="changePwdForm.$invalid"/>
		</form>
	</div>
	<div class="safe-part">
		<p class="tips">邮箱</p>
		<p class="message">{{ email || "未设置"}}</p>
		<p class="activity" ng-show="!email"><a href="javascript:;" ng-click="changeEmail=!changeEmail;changPwd =false;changeMobile=false">设置</a></p>
		<p class="activity" ng-show="email"><a href="javascript:;" ng-click="changeEmail=!changeEmail;changPwd =false;changeMobile=false">修改</a></p>
		<div></div>
	</div>
	<div class="change-area change-mail-height" ng-show="changeEmail" ng-init="changeEmail = false">
		<form class="real-name" name="bindEmailForm" >
			<div class="safe-form-group">
				<label>邮箱：</label>
				<input type="text" class="verify-input"
						id="newEmail" 
						name="newEmail" 
						ng-model="newEmail" 
						ng-pattern="/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/" 
						ensure-unique-email="newEmail" required ng-focus autofocus/>
				<div ng-show="
						bindEmailForm.newEmail.$dirty && 
						bindEmailForm.newEmail.$invalid && 
						!bindEmailForm.newEmail.$focused">
					<div class="user-tips-area safe-tips-area safe-email-change" ng-show="bindEmailForm.newEmail.$error.pattern">
						<img ng-src="images/check_no.png" class="user-check-img">
						<p class="input-tips user-input-tips">邮箱格式不正确</p>
					</div>
					<div  class="user-tips-area safe-tips-area safe-email-change" ng-show="bindEmailForm.newEmail.$error.unique">
						<img ng-src="images/check_no.png" class="user-check-img">
						<p class="input-tips user-input-tips">邮箱已被占用</p>
					</div>
					<div  class="user-tips-area safe-tips-area safe-email-change" ng-show="bindEmailForm.newEmail.$error.required">
						<img ng-src="images/check_no.png" class="user-check-img">
						<p class="input-tips user-input-tips">请填写邮箱</p>
					</div>
				</div>
			</div>
			<input type="button" value="确定" class="verify-button mail-button" ng-disabled="bindEmailForm.$invalid" ng-click="bindEmail(newEmail)"/>
		</form>
	</div>
	<div class="safe-part">
		<p class="tips">手机号码</p>
		<p class="message">{{ mobile || "未设置"}}</p>
		<p class="activity" ng-show="!mobile"><a href="javascript:;" ng-click="changeMobile=!changeMobile;changeEmail=false;changPwd =false">设置</a></p>
		<p class="activity" ng-show="mobile"><a href="javascript:;" ng-click="changeMobile=!changeMobile;changeEmail=false;changPwd =false">修改</a></p>
		<div></div>
	</div>

	<div class="change-area change-phone-height" ng-show="changeMobile" ng-init="changeMobile=false">
		<form class="real-name" name="changeMobileForm">
			<div class="safe-form-group">
				<label>手机号码：</label>
				<input type="text" class="verify-input phone-input-width"
					id = "mobileNo" 
					name = "mobileNo"  
				    ng-model="mobileNo" 
					ng-pattern="/^((13[0-9])|(15[^4,\D])|(18[0-9])|(17[0678]))\d{8}$/"
					ensure-unique-mobile="mobileNo" 
					ng-focus required autofocus/>
				<input type="button" value="获取验证码"
					class="{{changeMobileForm.mobileNo.$invalid ? 'get-verify-button verify-index grey' : 'get-verify-button verify-index'}}"
					ng-click="sendMobileCaptcha(mobileNo)" id="getVerify" ng-disabled="changeMobileForm.mobileNo.$invalid"/>
				<div ng-show="changeMobileForm.mobileNo.$dirty && changeMobileForm.mobileNo.$invalid && !changeMobileForm.mobileNo.$focused">
					<div  class="user-tips-area safe-tips-area" 
							ng-show="changeMobileForm.mobileNo.$error.required &&
								 	!changeMobileForm.mobileNo.$focused">
						<img ng-src="images/check_no.png" class="user-check-img phone-verify-check-img">
						<p class="input-tips user-input-tips phone-verify-tips-index">请输入手机号码</p>
					</div>
					<div  class="user-tips-area safe-tips-area" 
								ng-show="changeMobileForm.mobileNo.$error.pattern && 
								 		!changeMobileForm.mobileNo.$focused">
						<img ng-src="images/check_no.png" class="user-check-img phone-verify-check-img">
						<p class="input-tips user-input-tips phone-verify-tips-index">手机号码格式错误</p>
					</div>
					<div  class="user-tips-area safe-tips-area" 
								ng-show="changeMobileForm.mobileNo.$error.unique">
						<img ng-src="images/check_no.png" class="user-check-img phone-verify-check-img">
						<p class="input-tips user-input-tips phone-verify-tips-index">手机号码已被占用</p>
					</div>
				</div>
			</div>
			<div class="safe-form-group">
				<label>短信验证码：</label>
				<input type="text" class="verify-input" 
					name = "inputCaptcha"
					ng-model="inputCaptcha"
					ng-focus 
					required/>
				<div  class="user-tips-area safe-tips-area" 
					ng-show="changeMobileForm.inputCaptcha.$error.required &&changeMobileForm.inputCaptcha.$dirty">
					<img ng-src="images/check_no.png" class="user-check-img">
					<p class="input-tips user-input-tips">请输入短信验证码</p>
				</div>
			</div>
			<input type="button" value="确定" class="verify-button" ng-click="bindMobile(mobileNo, inputCaptcha)" ng-disabled="changeMobileForm.$invalid"/>
		</form>
	</div>

	<div class="safe-part">
		<p class="tips">第三方托管账户</p>
		<p class="message" ng-show="!haveTrusteeshipAccount">未开通</p>
		<p class="message" ng-show="haveTrusteeshipAccount">已开通</p>
		<p class="activity" ng-show="!haveTrusteeshipAccount"><a href="javascript:;" ng-click="openTrusteeshipAccount = !openTrusteeshipAccount;changeMobile=false;changeEmail=false;changPwd =false">开通</a></p>
		<p class="activity hadset" ng-show="haveTrusteeshipAccount">已开通</p>
		<div class="check-ok" ng-show="haveTrusteeshipAccount"></div>
	</div>
	
	<div class="change-area change-phone-height" ng-show="openTrusteeshipAccount">
		<form class="real-name" name="openTrusteeshipAccountForm">
			<div class="safe-form-group">
				<label>真实姓名：</label>
				<input type="text" class="verify-input" name = "realName" ng-model="user.realName"
					ng-focus
					required/>
				<div  class="user-tips-area safe-tips-area" 
						ng-show="openTrusteeshipAccountForm.realName.$dirty && openTrusteeshipAccountForm.realName.$error.required">
					<img ng-src="images/check_no.png" class="user-check-img">
					<p class="input-tips user-input-tips">姓名不能为空</p>
				</div>
			</div>
			<div class="safe-form-group">
				<label>身份证号：</label>
				<input type="text" class="verify-input" name="idCardNo" ng-model="user.idCardNo"
					ng-focus
					required/>
				<div  class="user-tips-area safe-tips-area"
						ng-show="openTrusteeshipAccountForm.idCardNo.$dirty && openTrusteeshipAccountForm.idCardNo.$error.required"> 
					<img ng-src="images/check_no.png" class="user-check-img">
					<p class="input-tips user-input-tips">身份证号码不能为空</p>
				</div>
			</div>
			<input type="button" value="提交实名认证" class="verify-button" ng-click="realNameAuth(user)"/>
		</form>
	</div>
</div>
